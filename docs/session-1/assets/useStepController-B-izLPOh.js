import{r as e}from"./index-qVjkReQt.js";const h=({totalSteps:c,resetSignal:k,stepSignal:i=0,autoAdvance:t=!1,stepDuration:b=1e3,onLastStepChange:f})=>{const[u,s]=e.useState(0),[m,M]=e.useState(t);e.useEffect(()=>{s(0),M(t)},[k,t]);const n=e.useRef(i);e.useEffect(()=>{i!==n.current&&(i>n.current?s(r=>Math.min(r+1,c-1)):i<n.current&&s(r=>Math.max(r-1,0)),n.current=i)},[i,c]),e.useEffect(()=>{if(!m||u>=c-1)return;const r=setTimeout(()=>{s(P=>Math.min(P+1,c-1))},b);return()=>clearTimeout(r)},[u,m,c,b]);const o=e.useCallback(()=>{s(r=>Math.min(r+1,c-1))},[c]),x=e.useCallback(()=>{s(r=>Math.max(r-1,0))},[]),E=e.useCallback(r=>{s(Math.max(0,Math.min(r,c-1)))},[c]),a=e.useCallback(()=>{M(r=>!r)},[]),y=e.useCallback(r=>r<=u,[u]),C=e.useCallback(r=>r===u,[u]),l=u===c-1;return e.useEffect(()=>{f==null||f(l)},[l,f]),{currentStep:u,isPlaying:m,nextStep:o,previousStep:x,goToStep:E,togglePlay:a,isStepVisible:y,isStepActive:C,isFirstStep:u===0,isLastStep:l,progress:c>0?u/(c-1):0}};export{h as u};
